import{P as u,aF as w,l as n,m as g,r as M,ap as k,K as x}from"./index-2ffefb19.js";import{u as f}from"./useTasks-2b9af50c.js";import{C as S,D as L}from"./DatePaginator-c5bedbb4.js";import{u as j}from"./createReactComponent-54c4401f.js";import"./PeriodPaginator-155b6a6f.js";import"./Calendar-b3b1f6af.js";import"./get-floating-position-0fb4b0fd.js";import"./AccordionChevron-a4169337.js";import"./use-resolved-styles-api-7d40f7af.js";import"./use-disclosure-38a261fe.js";const O="_wrapper_1iyys_1",$="_modalContent_1iyys_48",v="_calendarHeaderControl_1iyys_54",N="_calendarHeaderLevel_1iyys_58",b="_monthsListCell_1iyys_73",H="_yearsListCell_1iyys_87",T="_weekday_1iyys_30",F="_day_1iyys_116",I={wrapper:O,modalContent:$,calendarHeaderControl:v,calendarHeaderLevel:N,monthsListCell:b,yearsListCell:H,weekday:T,day:F},W="_calendarDaysWrapper_1gs1o_5",P="_calendarDay_1gs1o_5",E="_currentMonth_1gs1o_36",R="_tasksList_1gs1o_56",Y="_selectedDay_1gs1o_111",q="_otherDays_1gs1o_120",K="_task_1gs1o_56",z="_low_1gs1o_149",A="_medium_1gs1o_154",B="_high_1gs1o_159",o={calendarDaysWrapper:W,calendarDay:P,currentMonth:E,tasksList:R,selectedDay:Y,otherDays:q,task:K,low:z,medium:A,high:B},C=({day:s,changeCurrentDate:c})=>{const{tasks:r}=f(),i=w(),l=new Date(s.getFullYear(),s.getMonth(),1),h=l.getDay(),d=7,m=(h-2+d)%d;let D=[],t=new Date(l-1);t.setDate(t.getDate()-m);const _=new Date().getMonth();for(let e=0;e<42;e++){const a={currentMonth:t.getMonth()===s.getMonth(),date:new Date(t).toISOString().slice(0,10),month:t.getMonth(),number:t.getDate(),selected:t.toDateString()===s.toDateString(),year:t.getFullYear(),tasks:[]};r==null||r.map(y=>{y.date===a.date&&a.tasks.push(y)}),D.push(a),t.setDate(t.getDate()+1)}const p=e=>{c(e),i(`/calendar/day/${e.date}`)};return n.jsx("ul",{className:o.calendarDaysWrapper,children:D.map(e=>n.jsxs("li",{onClick:()=>{e.currentMonth&&p(e)},className:g(o.calendarDay,e.currentMonth?o.currentMonth:null),children:[n.jsx("span",{className:`${e.selected&&e.month===_&&o.selectedDay} ${!e.currentMonth&&o.otherDays}`,children:e.number}),e.tasks.length>0&&n.jsx("ul",{className:o.tasksList,children:e.tasks.map(a=>n.jsx("li",{className:g(o.task,o[a.priority]),children:a.title},a._id))})]},e.date))})};C.propTypes={day:u.instanceOf(Date).isRequired,changeCurrentDate:u.func.isRequired};const G=()=>{const[s,c]=M.useState(new Date),r=w(),{currentMonth:i}=k(),l=j(),h=t=>{c(new Date(t.year,t.month,t.number))};M.useEffect(()=>{l(x(i))},[l,s,i]);const d=()=>{const t=new Date(s);t.setMonth(t.getMonth()+1),c(t),r(`/calendar/month/${new Date(t).toISOString().slice(0,7)}`)},m=()=>{const t=new Date(s);t.setMonth(t.getMonth()-1),c(t),r(`/calendar/month/${new Date(t).toISOString().slice(0,7)}`)},D=t=>{const _=new Date(t),p={year:_.getFullYear(),month:_.getMonth(),number:s.getDate()};h(p);const e=new Date(t);e.setMonth(t.getMonth()+1);const a=e.toISOString().slice(0,7);r(`/calendar/month/${a}`)};return n.jsxs("div",{className:I.wrapper,children:[n.jsx(S,{nextDate:d,prevDate:m,currentDate:s,onChangeCalendar:D,mode:"month"}),n.jsx(L,{currentDate:s,isDateShown:!1}),n.jsx(C,{day:s,changeCurrentDate:h})]})},nt=G;export{nt as default};
